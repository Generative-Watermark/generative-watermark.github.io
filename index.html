<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">
    <title>Generative Watermarking for AIGC</title>
    
    <meta name="description" content="MarkAI is an open-source watermarking toolkit for large models, including text watermarking MarkLLM and visual watermarking MarkDiffusion, dedicated to advancing the traceability and transparency of AI-generated content.">
    <link rel="canonical" href="https://thu-bpm.github.io/markai/">

    <meta property="og:title" content="MarkAI - Open-Source Watermarking Toolkit">
    <meta property="og:description" content="MarkAI is an open-source watermarking toolkit for large models, including text watermarking MarkLLM and visual watermarking MarkDiffusion, dedicated to advancing the traceability and transparency of AI-generated content.">
    <meta property="og:type" content="article">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="MarkAI - Open-Source Watermarking Toolkit">
    <meta name="twitter:description" content="MarkAI is an open-source watermarking toolkit for large models, including text watermarking MarkLLM and visual watermarking MarkDiffusion, dedicated to advancing the traceability and transparency of AI-generated content.">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Product+Sans&family=Google+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&family=Google+Sans+Text:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&display=swap">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">

    <style>
        :root {
            --primary-color: #ffd700;
            --secondary-color: #4a9eff;
            --accent-color: #87ceeb;
            --bg-primary: #000000;
            --bg-secondary: #111111;
            --bg-tertiary: #1a1a1a;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --text-muted: #888888;
            --border-color: #333333;
            --hover-bg: rgba(255, 215, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Google Sans', 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-primary);
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        html {
            scroll-behavior: smooth;
        }

        /* Smooth scroll timing */
        * {
            scroll-behavior: smooth;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Enhanced Progress Bar */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 50px;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            z-index: 1001;
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
            display: flex;
            align-items: center;
            padding: 0 24px;
        }

        .progress-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .progress-logo {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color);
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .progress-nav {
            display: flex;
            gap: 20px;
            font-size: 0.9rem;
        }

        .progress-nav a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            padding: 4px 8px;
            border-radius: 4px;
            position: relative;
        }

        .progress-nav a:hover,
        .progress-nav a.active {
            color: var(--primary-color);
            background: rgba(255, 215, 0, 0.1);
        }

        .progress-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), var(--accent-color));
            width: 0%;
            transition: width 0.3s ease;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.6);
        }

        /* Universal dynamic background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #000000 0%, #0a0a0a 25%, #111111 50%, #0a0a0a 75%, #000000 100%);
            z-index: -2;
        }

        /* Global particles container */
        .global-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        /* Enhanced particle effects */
        .global-particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
        }

        .particle-gold {
            background: radial-gradient(circle, #ffd700, transparent);
            animation: floatGold 8s ease-in-out infinite;
        }

        .particle-blue {
            background: radial-gradient(circle, #4a9eff, transparent);
            animation: floatBlue 6s ease-in-out infinite;
        }

        .particle-white {
            background: radial-gradient(circle, rgba(255, 255, 255, 0.8), transparent);
            animation: floatWhite 10s ease-in-out infinite;
        }

        .particle-cyan {
            background: radial-gradient(circle, #87ceeb, transparent);
            animation: floatCyan 7s ease-in-out infinite;
        }

        @keyframes floatGold {
            0%, 100% { 
                transform: translateY(0px) translateX(0px) rotate(0deg); 
                opacity: 0.6;
                filter: blur(0px);
            }
            25% { 
                transform: translateY(-30px) translateX(15px) rotate(90deg); 
                opacity: 1;
                filter: blur(1px);
            }
            50% { 
                transform: translateY(-15px) translateX(-20px) rotate(180deg); 
                opacity: 0.8;
                filter: blur(0.5px);
            }
            75% { 
                transform: translateY(-25px) translateX(10px) rotate(270deg); 
                opacity: 0.9;
                filter: blur(1.5px);
            }
        }

        @keyframes floatBlue {
            0%, 100% { 
                transform: translateY(0px) translateX(0px) scale(1) rotate(0deg); 
                opacity: 0.5;
            }
            33% { 
                transform: translateY(-20px) translateX(-15px) scale(1.2) rotate(120deg); 
                opacity: 0.9;
            }
            66% { 
                transform: translateY(-35px) translateX(25px) scale(0.8) rotate(240deg); 
                opacity: 0.7;
            }
        }

        @keyframes floatWhite {
            0%, 100% { 
                transform: translateY(0px) translateX(0px) rotate(0deg); 
                opacity: 0.4;
            }
            20% { 
                transform: translateY(-10px) translateX(20px) rotate(72deg); 
                opacity: 0.8;
            }
            40% { 
                transform: translateY(-25px) translateX(-10px) rotate(144deg); 
                opacity: 0.6;
            }
            60% { 
                transform: translateY(-15px) translateX(30px) rotate(216deg); 
                opacity: 0.9;
            }
            80% { 
                transform: translateY(-30px) translateX(-20px) rotate(288deg); 
                opacity: 0.5;
            }
        }

        @keyframes floatCyan {
            0%, 100% { 
                transform: translateY(0px) translateX(0px) rotate(0deg) scale(1); 
                opacity: 0.3;
            }
            30% { 
                transform: translateY(-40px) translateX(10px) rotate(108deg) scale(1.1); 
                opacity: 0.7;
            }
            70% { 
                transform: translateY(-20px) translateX(-30px) rotate(252deg) scale(0.9); 
                opacity: 0.5;
            }
        }

        /* Header */
        .header {
            background: transparent;
            color: var(--text-primary);
            padding: 120px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
            min-height: 100vh;
            display: flex;
            align-items: center;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 80% 20%, rgba(74, 158, 255, 0.08) 0%, transparent 60%),
                radial-gradient(circle at 50% 50%, rgba(135, 206, 235, 0.05) 0%, transparent 70%);
            z-index: 1;
        }

        .header-content {
            position: relative;
            z-index: 2;
            width: 100%;
        }

        .header h1 {
            font-size: 4rem;
            font-weight: 700;
            margin-bottom: 24px;
            letter-spacing: -0.02em;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from {
                filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.3));
            }
            to {
                filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.5));
            }
        }

        .header p {
            font-size: 1.3rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto;
            color: var(--text-secondary);
        }

        /* Scroll down indicator */
        .scroll-indicator {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            z-index: 10;
            transition: all 0.3s ease;
        }

        .scroll-indicator:hover {
            transform: translateX(-50%) scale(1.1);
        }

        .scroll-text {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 8px;
            opacity: 0.8;
            animation: fadeInOut 3s ease-in-out infinite;
        }

        .scroll-arrow {
            width: 30px;
            height: 30px;
            border: 2px solid var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 215, 0, 0.1);
            backdrop-filter: blur(10px);
            animation: bounce 2s ease-in-out infinite;
        }

        .scroll-arrow::after {
            content: '‚Üì';
            color: var(--primary-color);
            font-size: 1.2rem;
            font-weight: bold;
            animation: arrowGlow 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        @keyframes fadeInOut {
            0%, 100% {
                opacity: 0.6;
            }
            50% {
                opacity: 1;
            }
        }

        @keyframes arrowGlow {
            0%, 100% {
                text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
            }
            50% {
                text-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 30px rgba(255, 215, 0, 0.6);
            }
        }

        /* Hide scroll indicator on small screens */
        @media (max-height: 600px) {
            .scroll-indicator {
                display: none;
            }
        }



        /* Main Content */
        .main-content {
            background: transparent;
            position: relative;
        }

        .section {
            padding: 100px 0;
            position: relative;
        }

        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.2);
            z-index: -1;
        }

        .section:nth-child(even)::before {
            background: rgba(10, 10, 10, 0.3);
        }

        .section:nth-child(odd)::before {
            background: rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 2.7rem;
            font-weight: 700;
            margin-bottom: 32px;
            text-align: center;
            color: var(--text-primary);
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.8s ease forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            text-align: center;
            max-width: 900px;
            margin: 0 auto 80px;
            line-height: 1.8;
        }

        /* Principle Section */
        .principle-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 60px;
        }

        .principle-card {
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            border: 1px solid rgba(255, 215, 0, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .principle-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .principle-card:hover::before {
            transform: scaleX(1);
        }

        .principle-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary-color);
            box-shadow: 0 20px 40px rgba(255, 215, 0, 0.1);
        }

        .principle-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 24px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
        }

        .principle-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 16px;
            text-align: center;
            color: var(--text-primary);
        }

        .principle-description {
            color: var(--text-secondary);
            text-align: center;
            line-height: 1.6;
        }

        /* Projects Grid */
        .projects-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-top: 80px;
        }

        .project-card {
            background: rgba(26, 26, 26, 0.9);
            backdrop-filter: blur(15px);
            border-radius: 24px;
            overflow: hidden;
            border: 1px solid rgba(255, 215, 0, 0.3);
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
        }

        .project-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.05), rgba(74, 158, 255, 0.05));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .project-card:hover::before {
            opacity: 1;
        }

        .project-card:hover {
            transform: translateY(-12px) scale(1.02);
            border-color: var(--primary-color);
            box-shadow: 0 25px 50px rgba(255, 215, 0, 0.2);
        }

        .project-header {
            padding: 40px;
            background: rgba(17, 17, 17, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 215, 0, 0.2);
            text-align: center;
            position: relative;
        }

        .project-header.text-watermark {
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.9) 0%, rgba(22, 33, 62, 0.9) 100%);
        }

        .project-header.image-watermark {
            background: linear-gradient(135deg, rgba(15, 52, 96, 0.9) 0%, rgba(22, 83, 126, 0.9) 100%);
        }

        .project-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .project-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .project-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        .project-content {
            padding: 40px;
        }

        .project-description {
            font-size: 1.1rem;
            line-height: 1.7;
            margin-bottom: 32px;
            color: var(--text-secondary);
        }

        .feature-section {
            margin-bottom: 32px;
        }

        .feature-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .project-features {
            list-style: none;
            margin-bottom: 32px;
        }

        .project-features li {
            margin-bottom: 12px;
            padding-left: 28px;
            position: relative;
            font-size: 1rem;
            color: var(--text-secondary);
            transition: color 0.2s ease;
        }

        .project-features li:hover {
            color: var(--text-primary);
        }

        .project-features li::before {
            content: '‚ú¶';
            position: absolute;
            left: 0;
            color: var(--primary-color);
            font-weight: bold;
        }

        .algorithms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .algorithm-tag {
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 8px;
            padding: 8px 12px;
            text-align: center;
            font-size: 0.85rem;
            color: var(--primary-color);
            transition: all 0.2s ease;
        }

        .algorithm-tag:hover {
            background: rgba(255, 215, 0, 0.2);
            transform: translateY(-2px);
        }

        .project-actions {
            display: flex;
            gap: 16px;
        }

        .project-actions.full-width-buttons {
            display: flex;
            gap: 16px;
            justify-content: space-between;
            margin-top: 55px;
        }

        .project-actions.full-width-buttons .btn {
            flex: 1;
            justify-content: center;
        }

        .new-project-notice {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1) 0%, rgba(74, 158, 255, 0.1) 100%);
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 12px;
            padding: 21px 20px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .new-project-notice::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            animation: shimmer 2s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        .new-project-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 215, 0, 0.2);
            color: var(--primary-color);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 8px;
            border: 1px solid rgba(255, 215, 0, 0.4);
        }

        .new-project-text {
            color: var(--text-secondary);
            font-size: 1.05rem;
            line-height: 1.5;
        }

        .new-project-text strong {
            color: var(--text-primary);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 14px 20px;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: var(--bg-primary);
            font-weight: 700;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 215, 0, 0.3);
        }

        .btn-secondary {
            background: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .btn-secondary:hover {
            background: var(--primary-color);
            color: var(--bg-primary);
            transform: translateY(-3px);
        }

        /* Architecture Section */
        .architecture-grid {
            display: flex;
            flex-direction: column;
            gap: 100px;
            margin-top: 80px;
        }

        .architecture-item {
            text-align: center;
            position: relative;
        }

        .architecture-title {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 40px;
            color: var(--text-primary);
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .architecture-image {
            width: 100%;
            max-width: 1000px;
            height: auto;
            border: 3px solid rgba(255, 215, 0, 0.4);
            background: rgba(26, 26, 26, 0.9);
            backdrop-filter: blur(15px);
            transition: all 0.4s ease;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            margin: 0 auto;
            display: block;
        }

        .architecture-image:hover {
            transform: translateY(-10px) scale(1.01);
            border-color: var(--primary-color);
            box-shadow: 0 25px 60px rgba(255, 215, 0, 0.3);
        }

        .architecture-description {
            margin-top: 32px;
            font-size: 1.1rem;
            color: var(--text-secondary);
            line-height: 1.7;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Statistics */
        .stats {
            background: transparent;
            padding: 100px 0;
            text-align: center;
            position: relative;
        }

        .stats::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                rgba(5, 5, 5, 0.4),
                radial-gradient(circle at 30% 70%, rgba(255, 215, 0, 0.15) 0%, transparent 60%),
                radial-gradient(circle at 70% 30%, rgba(74, 158, 255, 0.15) 0%, transparent 60%);
        }

        .stats-content {
            position: relative;
            z-index: 2;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 60px;
            margin-top: 60px;
        }

        .stat-item {
            text-align: center;
            padding: 30px;
            background: rgba(26, 26, 26, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255, 215, 0, 0.3);
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-8px);
            background: rgba(255, 215, 0, 0.1);
            border-color: var(--primary-color);
        }

        .stat-number {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 12px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            font-size: 1rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Footer */
        .footer {
            background: rgba(5, 5, 5, 0.6);
            backdrop-filter: blur(15px);
            padding: 80px 0 40px;
            text-align: center;
            border-top: 1px solid rgba(255, 215, 0, 0.2);
            position: relative;
        }

        .footer p {
            color: var(--text-secondary);
            margin-bottom: 32px;
            font-size: 1.1rem;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 40px;
            list-style: none;
            margin-bottom: 40px;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }

        .footer-links a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 0;
            background: var(--primary-color);
            transition: width 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--primary-color);
        }

        .footer-links a:hover::after {
            width: 100%;
        }

        .copyright {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-top: 20px;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .projects-grid {
                grid-template-columns: 1fr;
                gap: 40px;
            }

            .architecture-grid {
                gap: 80px;
            }

            .architecture-image {
                max-width: 100%;
            }
        }

        @media (max-width: 768px) {
            .progress-container {
                height: auto;
                min-height: 60px;
                padding: 8px 16px;
            }

            .progress-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
                width: 100%;
            }

            .progress-nav {
                gap: 8px;
                font-size: 0.75rem;
                flex-wrap: wrap;
                width: 100%;
                justify-content: flex-start;
            }

            .progress-nav a {
                padding: 2px 6px;
                white-space: nowrap;
                min-width: auto;
            }


            .header h1 {
                font-size: 2.7rem;
            }

            .header p {
                font-size: 1.1rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .project-actions {
                flex-direction: column;
            }


            .container {
                padding: 0 16px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 30px;
            }

            .principle-grid {
                grid-template-columns: 1fr;
            }

            .footer-links {
                flex-wrap: wrap;
                gap: 20px;
            }

            .algorithms-grid {
                grid-template-columns: 1fr 1fr;
            }

            .architecture-grid {
                gap: 60px;
            }

            .architecture-title {
                font-size: 1.8rem;
            }

            .architecture-description {
                font-size: 0.95rem;
                margin-top: 24px;
            }

            .scroll-indicator {
                bottom: 20px;
            }

            .scroll-text {
                font-size: 0.8rem;
            }

            .scroll-arrow {
                width: 25px;
                height: 25px;
            }

            .scroll-arrow::after {
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .progress-container {
                padding: 6px 12px;
            }

            .progress-nav {
                font-size: 0.7rem;
                gap: 6px;
            }

            .progress-nav a {
                padding: 1px 4px;
                font-size: 0.65rem;
            }

            .progress-nav .external-link {
                display: none;
            }

            .progress-logo {
                font-size: 1rem;
            }

            .header h1 {
                font-size: 2.2rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .algorithms-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <!-- Global Dynamic Background -->
    <div class="global-particles" id="globalParticles"></div>

    <!-- Enhanced Progress Bar -->
    <div class="progress-container">
        <div class="progress-info">
            <div class="progress-logo">Generative Watermarking for AIGC</div>
            <nav class="progress-nav">
                <a href="#home">Homepage</a>
                <a href="#necessity">Necessity</a>
                <a href="#principles">Principles</a>
                <a href="#projects">Projects</a>
                <a href="#architecture">Architecture</a>
                <a href="https://github.com/THU-BPM/MarkLLM" target="_blank" class="external-link">MarkLLM</a>
                <a href="https://github.com/THU-BPM/MarkDiffusion" target="_blank" class="external-link">MarkDiffusion</a>
                <!-- <a href="#stats">Statistics</a> -->
            </nav>
        </div>
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- Header -->
    <header id="home" class="header">
        <div class="container">
            <div class="header-content">
                <h1>Generative Watermarking for AIGC</h1>
                <p>Open-Source watermarking toolkits for generative models, advancing traceability and transparency of AI-generated content</p>
            </div>
        </div>
        <!-- Scroll Down Indicator -->
        <div class="scroll-indicator" id="scrollIndicator">
            <div class="scroll-text">Scroll Down</div>
            <div class="scroll-arrow"></div>
        </div>
    </header>


    <!-- Main Content -->
    <main class="main-content">
        <!-- Necessity Section -->
        <section id="necessity" class="section">
            <div class="container">
                <h2 class="section-title">Why is Watermarking Technology Important?</h2>
                <p class="section-subtitle">
                    With the rapid development of generative AI models, particularly large language models and diffusion models, AI-generated content is increasingly integrated into daily life and work. However, this integration brings numerous challenges, including the spread of misinformation, copyright protection issues, and questions of accountability. In this context, watermarking technology serves as an effective content identification method and plays a crucial role in addressing these challenges.
                </p>
                <div class="principle-grid">
                    <div class="principle-card">
                        <div class="principle-icon">üîç</div>
                        <h3 class="principle-title">Content Tracing</h3>
                        <p class="principle-description">
                            Distinguish AI-generated content from human-created content, prevent the spread of misinformation, and maintain a healthy information ecosystem.
                        </p>
                    </div>
                    <div class="principle-card">
                        <div class="principle-icon">üõ°Ô∏è</div>
                        <h3 class="principle-title">Copyright Protection</h3>
                        <p class="principle-description">
                            Protect intellectual property rights of original content and prevent unauthorized AI model training and content generation.
                        </p>
                    </div>
                    <!-- <div class="principle-card">
                        <div class="principle-icon">üìä</div>
                        <h3 class="principle-title">Accountability Tracing</h3>
                        <p class="principle-description">
                            Establish accountability chains for AI-generated content, ensuring traceability to the source when issues arise.
                        </p>
                    </div> -->
                </div>
            </div>
        </section>

        <!-- Principles Section -->
        <section id="principles" class="section">
            <div class="container">
                <h2 class="section-title">Watermarking Technology Principles</h2>
                <p class="section-subtitle">
                    Watermarking technology embeds imperceptible yet detectable signals during the AI generation process to mark and identify generated content.
                    This technology adds unique "fingerprints" to each generated content without compromising content quality.
                </p>
                
                <div class="principle-grid">
                    <div class="principle-card">
                        <div class="principle-icon">üîé</div>
                        <h3 class="principle-title">High Detectablity</h3>
                        <p class="principle-description">
                            Ensure that watermark signals can be reliably detected with high accuracy.
                        </p>
                    </div>
                    <div class="principle-card">
                        <div class="principle-icon">üåà</div>
                        <h3 class="principle-title">Low Impact on Content Quality</h3>
                        <p class="principle-description">
                            Watermarks should not degrade the quality of the generated content or affect user experience.
                        </p>
                    </div>
                    <div class="principle-card">
                        <div class="principle-icon">üö¢</div>
                        <h3 class="principle-title">Strong Robustness</h3>
                        <p class="principle-description">
                            Watermarks should ensure high robustness against various attacks, such as paraphrasing, reformatting, and noise addition.
                        </p>
                    </div>
                    <div class="principle-card">
                        <div class="principle-icon">‚ö°</div>
                        <h3 class="principle-title">Low Impact on Speed</h3>
                        <p class="principle-description">
                            Watermark embedding and detection processes should be efficient and not significantly affect generation speed.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="section">
            <div class="container">
                <h2 class="section-title">Open-Source Projects</h2>
                <p class="section-subtitle">
                    We have developed two generative watermarking toolkits for different types of targeted content, providing complete watermarking solutions for researchers and developers.
                </p>

                <div class="projects-grid">
                    <!-- MarkLLM Project -->
                    <div class="project-card">
                        <div class="project-header text-watermark">
                            <div class="project-icon">üìù</div>
                            <h3 class="project-title">MarkLLM</h3>
                            <p class="project-subtitle">Text Watermarking <br> Watermarking Toolkit for Large Language Models</p>
                        </div>
                        <div class="project-content">
                            <p class="project-description">
                                MarkLLM is an open-source text watermarking toolkit specifically designed for large language models, providing a unified implementation framework that support multiple advanced text watermarking algorithms, 
                                visualization tools, and comprehensive evaluation modules.
                            </p>
                            
                            <div class="feature-section">
                                <div class="feature-title">üîß Core Features</div>
                                <ul class="project-features">
                                    <li>Watermark Embedding: Add imperceptible watermarks during text generation</li>
                                    <li>Watermark Detection: Accurately identify watermark signals in text</li>
                                    <li>Mechanism Visualization: Intuitively demonstrate watermarking algorithm principles</li>
                                    <li>Robustness Testing: Evaluate watermark stability under various attacks</li>
                                    <li>Quality Assessment: Analyze the impact of watermarks on text quality</li>
                                </ul>
                            </div>

                            <div class="feature-section">
                                <div class="feature-title">üöÄ Supported Algorithms</div>
                                <div class="algorithms-grid">
                                    <div class="algorithm-tag">KGW</div>
                                    <div class="algorithm-tag">Unigram</div>
                                    <div class="algorithm-tag">SWEET</div>
                                    <div class="algorithm-tag">UPV</div>
                                    <div class="algorithm-tag">EWD</div>
                                    <div class="algorithm-tag">SIR</div>
                                    <div class="algorithm-tag">X-SIR</div>
                                    <div class="algorithm-tag">DiPmark</div>
                                    <div class="algorithm-tag">Unbiased</div>
                                    <div class="algorithm-tag">TS-Watermark</div>
                                    <div class="algorithm-tag">SynthID-Text</div>
                                    <div class="algorithm-tag">PF</div>
                                    <div class="algorithm-tag">MorphMark</div>
                                    <div class="algorithm-tag">Adaptive</div>
                                    <div class="algorithm-tag">k-SemStamp</div>
                                    <div class="algorithm-tag">EXP/EXPGumbel</div>
                                    <div class="algorithm-tag">EXP-Edit</div>
                                    <div class="algorithm-tag">ITS-Edit</div>
                                    <div class="algorithm-tag">SemStamp</div>
                                    <div class="algorithm-tag">Watermark Stealing</div>
                                    <div class="algorithm-tag">IE</div>
                                </div>
                            </div>

                            <div class="project-actions">
                                <a href="https://github.com/THU-BPM/MarkLLM" class="btn btn-primary" target="_blank">
                                    <span>GitHub</span>
                                </a>
                                <a href="https://arxiv.org/abs/2405.10051" class="btn btn-secondary" target="_blank">
                                    <span>ArXiv</span>
                                </a>
                                <a href="https://aclanthology.org/2024.emnlp-demo.7/" class="btn btn-primary" target="_blank">
                                    <span>EMNLP</span>
                                </a>
                                <a href="https://colab.research.google.com/drive/169MS4dY6fKNPZ7-92ETz1bAm_xyNAs0B?usp=sharing" class="btn btn-secondary" target="_blank">
                                    <span>Google Colab</span>
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- MarkDiffusion Project -->
                    <div class="project-card">
                        <div class="project-header image-watermark">
                            <div class="project-icon">üé®</div>
                            <h3 class="project-title">MarkDiffusion</h3>
                            <p class="project-subtitle">Image/Video Watermarking <br> Watermarking Toolkit for Latent Diffusion Models</p>
                        </div>
                        <div class="project-content">
                            <p class="project-description">
                                MarkDiffusion is an open-source generative watermarking toolkit for latent diffusion models, focusing on watermarking technology for image and video content,
                                providing unified implementation frameworks, visualization tools, and evaluation modules for various watermarking algorithms.
                            </p>
                            
                            <div class="new-project-notice">
                                <div class="new-project-badge">
                                    üöÄ <span>New Release</span>
                                </div>
                                <div class="new-project-text">
                                    <strong>MarkDiffusion has just been released!</strong> We're excited to share this comprehensive toolkit with the community. 
                                    Your contributions, feedback, and pull requests are warmly welcomed as we continue to enhance and expand the project together.
                                </div>
                            </div>
                            
                            <div class="feature-section">
                                <div class="feature-title">üîß Core Features</div>
                                <ul class="project-features">
                                    <li>Watermark Embedding: Add invisible watermarks during image/video generation</li>
                                    <li>Watermark Detection: Accurately extract and verify watermarks in visual content</li>
                                    <li>Mechanism Visualization: Display watermark distribution patterns in frequency and spatial domains</li>
                                    <li>Robustness Testing: Evaluate watermark resistance to various image/video processing attacks</li>
                                    <li>Quality Assessment: Analyze the impact of watermarks on visual content quality</li>
                                </ul>
                            </div>

                            <div class="feature-section">
                                <div class="feature-title">üöÄ Supported Algorithms</div>
                                <div class="algorithms-grid">
                                    <div class="algorithm-tag">Tree-Ring</div>
                                    <div class="algorithm-tag">Ring-ID</div>
                                    <div class="algorithm-tag">ROBIN</div>
                                    <div class="algorithm-tag">WIND</div>
                                    <div class="algorithm-tag">Gaussian-Shading</div>
                                    <div class="algorithm-tag">PRC</div>
                                    <div class="algorithm-tag">SEAL</div>
                                    <div class="algorithm-tag">VideoShield</div>
                                    <div class="algorithm-tag">SFW</div>
                                    <div class="algorithm-tag">GaussMarker</div>
                                    <div class="algorithm-tag">VideoMark</div>
                                </div>
                            </div>

                            <div class="project-actions full-width-buttons">
                                <a href="https://github.com/THU-BPM/MarkDiffusion" class="btn btn-primary" target="_blank">
                                    <span>GitHub</span>
                                </a>
                                <a href="https://arxiv.org/abs/2509.10569" class="btn btn-secondary" target="_blank">
                                    <span>ArXiv</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Architecture Section -->
        <section id="architecture" class="section">
            <div class="container">
                <h2 class="section-title">Project Architecture</h2>
                <p class="section-subtitle">
                    Both toolkits adopt modular design architecture, providing unified implementation frameworks and evaluation systems for watermarking technologies across different modalities.
                </p>

                <div class="architecture-grid">
                    <!-- MarkLLM Architecture -->
                    <div class="architecture-item">
                        <h3 class="architecture-title">MarkLLM Architecture</h3>
                        <img src="overview_markllm.png" alt="MarkLLM Architecture Diagram" class="architecture-image">
                        <p class="architecture-description">
                            MarkLLM adopts a unified implementation framework that supports the integration of multiple text watermarking algorithms.
                            The architecture includes algorithm layers, visualization layers, and evaluation layers, providing complete text watermarking solutions.
                        </p>
                    </div>

                    <!-- MarkDiffusion Architecture -->
                    <div class="architecture-item">
                        <h3 class="architecture-title">MarkDiffusion Architecture</h3>
                        <img src="overview_markdiffusion.png" alt="MarkDiffusion Architecture Diagram" class="architecture-image">
                        <p class="architecture-description">
                            MarkDiffusion focuses on watermarking technology for diffusion models, supporting image and video content.
                            The modular design facilitates algorithm extension and performance evaluation, providing a comprehensive visual watermarking toolkit.
                        </p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer id="contact" class="footer">
        <div class="container">
            <p>Developed and maintained by BPM Team of Tsinghua University</p>
            <!-- <ul class="footer-links">
                <li><a href="https://github.com/THU-BPM/MarkLLM" target="_blank">MarkLLM</a></li>
                <li><a href="https://github.com/THU-BPM/MarkDiffusion" target="_blank">MarkDiffusion</a></li>
                <li><a href="https://arxiv.org/abs/2405.10051" target="_blank">MarkLLM Paper</a></li>
                <li><a href="https://survey-text-watermark.github.io/" target="_blank">Watermarking Survey</a></li>
            </ul> -->
            <div class="copyright">
                ¬© 2025 Generative Watermarking for AIGC. All rights reserved.
            </div>
        </div>
    </footer>

    <script>
        // Progress Bar
        function updateProgressBar() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
            const progress = (scrollTop / scrollHeight) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        window.addEventListener('scroll', updateProgressBar);

        // Scroll indicator functionality
        let scrollIndicatorVisible = true;

        function hideScrollIndicator() {
            const scrollIndicator = document.getElementById('scrollIndicator');
            if (scrollIndicator && scrollIndicatorVisible) {
                scrollIndicator.style.opacity = '0';
                scrollIndicator.style.pointerEvents = 'none';
                scrollIndicatorVisible = false;
            }
        }

        // Hide scroll indicator when user starts scrolling
        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 100) {
                hideScrollIndicator();
            }
        });

        // Smooth scroll to necessity section when clicking scroll indicator
        function scrollToNecessity() {
            const necessitySection = document.querySelector('#necessity');
            if (necessitySection) {
                const progressBarHeight = getProgressBarHeight();
                const sectionTitle = necessitySection.querySelector('.section-title');
                let offsetTop;
                
                if (sectionTitle) {
                    // Position title - use section start position with 500px downward offset
                    offsetTop = necessitySection.offsetTop - progressBarHeight + 700;
                } else {
                    // Fallback
                    offsetTop = necessitySection.offsetTop - progressBarHeight + 700;
                }
                
                const distance = Math.abs(offsetTop - window.pageYOffset);
                const duration = Math.min(800, Math.max(300, distance / 2)); // Dynamic duration based on distance
                smoothScrollTo(offsetTop, duration);
                hideScrollIndicator();
            }
        }

        // Click handler for scroll indicator
        document.addEventListener('DOMContentLoaded', function() {
            const scrollIndicator = document.getElementById('scrollIndicator');
            if (scrollIndicator) {
                scrollIndicator.addEventListener('click', scrollToNecessity);
            }
        });

        // Create global dynamic particles
        function createGlobalParticles() {
            const particlesContainer = document.getElementById('globalParticles');
            const particleTypes = ['particle-gold', 'particle-blue', 'particle-white', 'particle-cyan'];
            const particleCount = 80;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                const typeIndex = Math.floor(Math.random() * particleTypes.length);
                particle.className = `global-particle ${particleTypes[typeIndex]}`;
                
                // Random size between 2px and 8px
                const size = Math.random() * 6 + 2;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                
                // Random position
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                
                // Random animation delay
                particle.style.animationDelay = Math.random() * 10 + 's';
                
                // Random animation duration based on type
                const baseDuration = typeIndex === 0 ? 8 : typeIndex === 1 ? 6 : typeIndex === 2 ? 10 : 7;
                particle.style.animationDuration = (baseDuration + Math.random() * 4 - 2) + 's';
                
                particlesContainer.appendChild(particle);
            }
        }

        // Add more particles dynamically
        function addContinuousParticles() {
            setInterval(() => {
                const particlesContainer = document.getElementById('globalParticles');
                const currentParticles = particlesContainer.children.length;
                
                if (currentParticles < 100) {
                    const particle = document.createElement('div');
                    const particleTypes = ['particle-gold', 'particle-blue', 'particle-white', 'particle-cyan'];
                    const typeIndex = Math.floor(Math.random() * particleTypes.length);
                    particle.className = `global-particle ${particleTypes[typeIndex]}`;
                    
                    const size = Math.random() * 6 + 2;
                    particle.style.width = size + 'px';
                    particle.style.height = size + 'px';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.top = Math.random() * 100 + '%';
                    particle.style.animationDelay = '0s';
                    
                    const baseDuration = typeIndex === 0 ? 8 : typeIndex === 1 ? 6 : typeIndex === 2 ? 10 : 7;
                    particle.style.animationDuration = (baseDuration + Math.random() * 4 - 2) + 's';
                    
                    particlesContainer.appendChild(particle);
                    
                    // Remove particle after its animation cycle
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                    }, (baseDuration + 2) * 1000);
                }
            }, 3000);
        }

        // Get dynamic progress bar height
        function getProgressBarHeight() {
            const progressContainer = document.querySelector('.progress-container');
            if (progressContainer) {
                return progressContainer.offsetHeight;
            }
            // Fallback values based on screen size
            return window.innerWidth <= 768 ? 60 : 50;
        }

        // Enhanced smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    let offsetTop;
                    
                    // Special handling for different sections
                    if (target.id === 'home') {
                        offsetTop = 0; // Homepage scrolls to top
                    } else {
                        const progressBarHeight = getProgressBarHeight();
                        // Position section title at the top of viewport (just below progress bar)
                        const sectionTitle = target.querySelector('.section-title');
                        if (sectionTitle) {
                            // Calculate offset to position title - use section start position with 500px downward offset
                            offsetTop = target.offsetTop - progressBarHeight + 700;
                        } else {
                            // Fallback for sections without .section-title
                            offsetTop = target.offsetTop - progressBarHeight + 700;
                        }
                    }
                    
                    // Debug info (can be removed in production)
                    console.log(`Navigating to ${target.id}:`);
                    console.log(`- Section offsetTop: ${target.offsetTop}`);
                    console.log(`- Final scroll position: ${offsetTop}`);
                    
                    // Calculate dynamic duration based on scroll distance
                    const distance = Math.abs(offsetTop - window.pageYOffset);
                    const duration = Math.min(800, Math.max(300, distance / 2.5)); // Faster scrolling
                    
                    // Use custom smooth scrolling with easing
                    smoothScrollTo(offsetTop, duration);
                }
            });
        });

        // Custom smooth scroll function with easing
        function smoothScrollTo(targetPosition, duration) {
            const startPosition = window.pageYOffset;
            const distance = targetPosition - startPosition;
            let startTime = null;
            
            // If the distance is very small, just jump there instantly
            if (Math.abs(distance) < 50) {
                window.scrollTo(0, targetPosition);
                return;
            }

            function animation(currentTime) {
                if (startTime === null) startTime = currentTime;
                const timeElapsed = currentTime - startTime;
                const run = easeInOutQuart(timeElapsed, startPosition, distance, duration);
                window.scrollTo(0, run);
                if (timeElapsed < duration) requestAnimationFrame(animation);
            }

            // Improved easing function for smoother animation
            function easeInOutQuart(t, b, c, d) {
                t /= d / 2;
                if (t < 1) return c / 2 * t * t * t * t + b;
                t -= 2;
                return -c / 2 * (t * t * t * t - 2) + b;
            }

            requestAnimationFrame(animation);
        }

        // Intersection Observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                    entry.target.classList.add('animate');
                }
            });
        }, observerOptions);

        // Initialize animations
        function initAnimations() {
            // Observe cards and elements for animation
            const animatedElements = [
                ...document.querySelectorAll('.project-card'),
                ...document.querySelectorAll('.principle-card'),
                ...document.querySelectorAll('.stat-item'),
                ...document.querySelectorAll('.architecture-item')
            ];

            animatedElements.forEach(element => {
                element.style.opacity = '0';
                element.style.transform = 'translateY(30px)';
                element.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
                observer.observe(element);
            });
        }

        // Counter animation for stats
        function animateCounters() {
            const counters = document.querySelectorAll('.stat-number');
            
            counters.forEach(counter => {
                const target = counter.textContent.replace(/[^\d]/g, '');
                const increment = target / 100;
                let current = 0;
                
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        counter.textContent = counter.textContent.includes('+') ? target + '+' : target;
                        clearInterval(timer);
                    } else {
                        counter.textContent = Math.floor(current);
                    }
                }, 20);
            });
        }

        // Stats section observer
        const statsObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    animateCounters();
                    statsObserver.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });

        // Parallax effect for header
        function handleParallax() {
            const scrolled = window.pageYOffset;
            const header = document.querySelector('.header');
            const parallaxSpeed = 0.3;
            
            if (header) {
                header.style.transform = `translateY(${scrolled * parallaxSpeed}px)`;
            }
        }

        window.addEventListener('scroll', handleParallax);

        // Active nav link highlighting
        function updateActiveNavLink() {
            const sections = document.querySelectorAll('section[id], header[id]'); // Include header with id
            const navLinks = document.querySelectorAll('.progress-nav a');
            
            let current = '';
            
            // Check if we're at the top (homepage)
            if (window.pageYOffset < 200) {
                current = 'home';
            } else {
                sections.forEach(section => {
                    const progressBarHeight = getProgressBarHeight();
                    const sectionTitle = section.querySelector('.section-title');
                    let sectionTop;
                    
                    if (sectionTitle) {
                        // Use the section start position with 500px downward offset for accurate detection
                        sectionTop = section.offsetTop - progressBarHeight + 700;
                    } else {
                        // Fallback for sections without .section-title
                        sectionTop = section.offsetTop - progressBarHeight + 700;
                    }
                    
                    if (window.pageYOffset >= sectionTop) {
                        current = section.getAttribute('id');
                    }
                });
            }
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        }

        window.addEventListener('scroll', updateActiveNavLink);
        
        // Update navigation calculations on window resize
        window.addEventListener('resize', function() {
            // Update active nav link highlighting after resize
            setTimeout(updateActiveNavLink, 100);
        });

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            createGlobalParticles();
            addContinuousParticles();
            initAnimations();
            
            // Observe stats section
            const statsSection = document.querySelector('#stats');
            if (statsSection) {
                statsObserver.observe(statsSection);
            }
            
            // Add loading animation to main elements
            setTimeout(() => {
                document.body.classList.add('loaded');
            }, 100);
        });

        // Add CSS for active nav link
        const style = document.createElement('style');
        style.textContent = `
            .nav-links a.active {
                color: var(--primary-color) !important;
            }
            .nav-links a.active::after {
                width: 100% !important;
            }
            body.loaded .header-content {
                animation: fadeInUp 1s ease forwards;
            }
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
